<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏥 智能医疗语音助手</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- 头部 -->
        <header class="app-header">
            <div class="logo">
                <span class="logo-icon">🏥</span>
                <h1>智能医疗语音助手</h1>
            </div>
            <div class="mode-switcher">
                <button class="mode-btn active" data-mode="patient">
                    <span>👤</span> 患者模式
                </button>
                <button class="mode-btn" data-mode="doctor">
                    <span>🩺</span> 医生模式
                </button>
                <button class="mode-btn" data-mode="consultation">
                    <span>📋</span> 会诊模式
                </button>
            </div>
        </header>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 患者/医生模式：对话界面 -->
            <div class="chat-panel" id="chat-panel">
                <div class="chat-messages" id="chat-messages">
                    <div class="welcome-message">
                        <div class="welcome-icon">👋</div>
                        <h3>欢迎使用智能医疗语音助手</h3>
                        <p id="mode-description">请描述您的症状，我会为您提供初步的导诊建议。</p>
                    </div>
                </div>

                <div class="chat-input-area">
                    <div class="text-input-row">
                        <textarea id="text-input" placeholder="输入您的症状描述..." rows="1"></textarea>
                        <button id="send-btn" class="send-btn" title="发送">
                            <span>📤</span>
                        </button>
                    </div>
                    <div class="voice-input-row">
                        <button id="record-btn" class="record-btn">
                            <span class="record-icon">🎙️</span>
                            <span class="record-text">点击录音</span>
                        </button>
                        <div class="recording-status" id="recording-status">
                            <div class="wave"></div>
                            <div class="wave"></div>
                            <div class="wave"></div>
                            <span>正在录音...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 会诊模式：病历生成界面 -->
            <div class="consultation-panel" id="consultation-panel" style="display: none;">
                <div class="consultation-input">
                    <h3>📝 粘贴医患对话</h3>
                    <textarea id="dialogue-input"
                        placeholder="请粘贴医患对话内容...&#10;&#10;例如：&#10;患者：医生，我最近头疼得厉害。&#10;医生：头疼持续多久了？&#10;患者：大概三天了，主要是额头和太阳穴位置。"></textarea>
                    <button id="generate-soap-btn" class="generate-btn">
                        <span>📋</span> 生成 SOAP 病历
                    </button>
                </div>
                <div class="consultation-output">
                    <h3>📄 生成的病历</h3>
                    <div id="soap-result" class="soap-result">
                        <p class="placeholder-text">病历将显示在这里...</p>
                    </div>
                    <div class="soap-actions" id="soap-actions" style="display: none;">
                        <button id="copy-soap-btn" class="copy-btn">
                            <span>📋</span> 复制病历
                        </button>
                        <button id="export-html-btn" class="export-btn">
                            <span>📥</span> 导出 HTML
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- 状态栏 -->
        <footer class="status-bar">
            <span class="status-item" id="mode-status">🟢 患者模式</span>
            <span class="status-item" id="connection-status">🔗 连接中...</span>
        </footer>
    </div>

    <!-- 音频播放器 -->
    <audio id="audio-player" style="display: none;"></audio>

    <script src="/static/app.js"></script>
</body>

</html>